# Домашнее задание к занятию «1.1 Архитектура современных веб-сервисов»

В качестве результата пришлите ответы на вопросы в личном кабинете студента на сайте [netology.ru](https://netology.ru).

## Задание Карта взаимодействия

### Легенда

Вам попало в руки приложение, состоящее из нескольких сервисов и клиент к нему. Ваша задача - используя Wireshark,
попытаться построить карту взаимодействия между сервисами в рамках запроса(ов), которые отправляет клиент (необходимо
проанализировать ответы).

В каталоге [assets](assets) представлены 4 серверов (`server-1/4`) под различные платформы:

1. *.bin - Linux
2. *.exe - Windows
3. i*.bin - Mac

А также клиент к ним (`client`):

1. *.bin - Linux
2. *.exe - Windows
3. i*.bin - Mac

### Порядок выполнения

1. Скачиваете серверы для вашей платформы (важно: не забывайте проверять любые скачиваемые исполняемые файлы через VirusTotal)
1. Скачиваете каталоги ключи из каталогов [`keys1`](assets/keys1) и [`keys2`](assets/keys2) и размещаете эти
   каталоги (`keys1` и `keys2`) в том же каталоге, что и скачанные в п.1 серверы
1. Запускаете по порядку серверы от 1 до 5, они стартуют на портах 9001-9004 соответственно
1. Запускаете Wireshark в режиме отслеживания localhost'а (`Loopback: lo`)
1. Запускаете клиента, удостоверяетесь, что клиент выводит ответ следующего вида (часть данных может отличаться):

```json
{
  "transactions": [
    {
      "id": 1,
      "userId": 999,
      "category": "auto",
      "amount": 1000000,
      "created": 1613389415
    }
  ],
  "categoryStats": {
    "auto": 1000000
  }
}
```

### Результаты

В качестве результата пришлите в указанной форме ответы на следующие вопросы:
1. Каким образом проходит путь запроса(ов) от клиента (на какой сервис и через какие сервисы)
1. Какие делаются запросы на каждом этапе и какие ответы на них приходят

Формат ответа (обратите внимание: это формат, а не пример реального взаимодействия из вашего задания):
```text
1. Client --> Server 4 (запрос):

GET http://localhost:9004/authenticate
Content-Type: application/json

{
  "login": "root",
  "password": "secret"
}

2. Server 4 --> Server 3 (запрос):

GET http://localhost:9003/authenticate
Content-Type: application/json

{
  "login": "root",
  "password": "secret"
}

3. Server 3 --> Server 4 (ответ):

200 OK
Content-Type: application/json

{
  "transactions": [
    {
      "id": 1,
      "userId": 999,
      "category": "auto",
      "amount": 1000000,
      "created": 1613389415
    }
  ],
  "categoryStats": {
    "auto": 1000000
  }
}

3. Server 4 --> Client (ответ):

200 OK
Content-Type: application/json

{
  "transactions": [
    {
      "id": 1,
      "userId": 999,
      "category": "auto",
      "amount": 1000000,
      "created": 1613389415
    }
  ],
  "categoryStats": {
    "auto": 1000000
  }
}
```

## Токен*

**Важно**: это необязательное задание. Его (не)выполнение не влияет на получение зачёта по ДЗ.

### Задача

В рамках того же проекта (из каталога [assets](assets)) вам предоставлены ключи (находятся в каталогах [keys1](assets/keys1) и [keys2](assets/keys2) соответственно). Ключи предназначены для `server1` и `server2` соответственно.

Используя полученную вами в первом задании схему взаимодействия и запросы/ответы на каждом этапе, попробуйте предположить, для чего используются эти ключи.

<details>
<summary>Подсказка</summary>

Вот вам несколько подсказок:
1. Попробуйте сравнить содержимое каталогов `keys1` и `keys2`
1. Попробуйте подменить один или несколько ключей и посмотреть, на что это повлияет (не забудьте перезапустить тот сервис, для которого вы поменяли ключ)
1. Возможно, часть передаваемых данных закодирована каким-то алгоритмом, попробуйте декодировать её и посмотреть, есть ли какие-то данные, которые указывают на то, как использовались ключи
</details>

### Результаты

В качестве результата пришлите ответы на следующие вопросы:
1. Для чего и на каком этапе используется (если используется) каждый ключ из каталога `keys1`
1. Для чего и на каком этапе используется (если используется) ключ из каталога `keys2`
